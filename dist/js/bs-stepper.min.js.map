{"version":3,"file":"bs-stepper.min.js","sources":["../../src/js/polyfill.js","../../src/js/util.js","../../src/js/listeners.js","../../src/js/index.js"],"sourcesContent":["let matches = window.Element.prototype.matches\nlet closest = (element, selector) => element.closest(selector)\nlet WinEvent = (inType, params) => new window.Event(inType, params)\n\nif (!window.Element.prototype.matches) {\n  matches = window.Element.prototype.msMatchesSelector ||\n    window.Element.prototype.webkitMatchesSelector\n}\n\nif (!window.Element.prototype.closest) {\n  closest = (element, selector) => {\n    if (!document.documentElement.contains(element)) {\n      return null\n    }\n\n    do {\n      if (matches.call(element, selector)) {\n        return element\n      }\n\n      element = element.parentElement || element.parentNode\n    } while (element !== null && element.nodeType === 1)\n\n    return null\n  }\n}\n\nif (!window.Event || typeof window.Event !== 'function') {\n  WinEvent = (inType, params) => {\n    params = params || {}\n    const e = document.createEvent('Event')\n    e.initEvent(inType, Boolean(params.bubbles), Boolean(params.cancelable))\n    return e\n  }\n}\n\nexport {\n  closest,\n  WinEvent\n}\n","import { WinEvent } from './polyfill'\n\nconst MILLISECONDS_MULTIPLIER = 1000\nconst Selectors = {\n  STEPS: '.step',\n  LINK: 'a',\n  STEPPER: '.bs-stepper'\n}\n\nconst ClassName = {\n  ACTIVE: 'active',\n  LINEAR: 'linear',\n  BLOCK: 'dstepper-block',\n  NONE: 'dstepper-none',\n  FADE: 'fade'\n}\n\nconst transitionEndEvent = 'transitionend'\nconst customProperty = 'bsStepper'\n\nconst showStep = (step, stepList) => {\n  if (step.classList.contains(ClassName.ACTIVE)) {\n    return\n  }\n\n  const activeStep = stepList.filter(step => step.classList.contains(ClassName.ACTIVE))\n  if (activeStep.length) {\n    activeStep[0].classList.remove(ClassName.ACTIVE)\n  }\n\n  step.classList.add(ClassName.ACTIVE)\n}\n\nconst showContent = (content, contentList) => {\n  if (content.classList.contains(ClassName.ACTIVE)) {\n    return\n  }\n\n  function complete () {\n    content.classList.add(ClassName.BLOCK)\n    content.removeEventListener(transitionEndEvent, complete)\n  }\n\n  const activeContent = contentList.filter(content => content.classList.contains(ClassName.ACTIVE))\n  if (activeContent.length) {\n    activeContent[0].classList.remove(ClassName.ACTIVE)\n    activeContent[0].classList.remove(ClassName.BLOCK)\n  }\n\n  if (content.classList.contains(ClassName.FADE)) {\n    content.classList.remove(ClassName.NONE)\n    const duration = getTransitionDurationFromElement(content)\n    content.addEventListener(transitionEndEvent, complete)\n    if (activeContent.length) {\n      activeContent[0].classList.add(ClassName.NONE)\n    }\n\n    content.classList.add(ClassName.ACTIVE)\n    emulateTransitionEnd(content, duration)\n  } else {\n    content.classList.add(ClassName.ACTIVE)\n  }\n}\n\nconst getTransitionDurationFromElement = element => {\n  if (!element) {\n    return 0\n  }\n\n  // Get transition-duration of the element\n  let transitionDuration = window.getComputedStyle(element).transitionDuration\n  const floatTransitionDuration = parseFloat(transitionDuration)\n\n  // Return 0 if element or transition duration is not found\n  if (!floatTransitionDuration) {\n    return 0\n  }\n\n  // If multiple durations are defined, take the first\n  transitionDuration = transitionDuration.split(',')[0]\n\n  return parseFloat(transitionDuration) * MILLISECONDS_MULTIPLIER\n}\n\nconst emulateTransitionEnd = (element, duration) => {\n  let called = false\n  const durationPadding = 5\n  const emulatedDuration = duration + durationPadding\n  function listener () {\n    called = true\n    element.removeEventListener(transitionEndEvent, listener)\n  }\n\n  element.addEventListener(transitionEndEvent, listener)\n  window.setTimeout(() => {\n    if (!called) {\n      element.dispatchEvent(WinEvent(transitionEndEvent))\n    }\n  }, emulatedDuration)\n}\n\nconst detectAnimation = (contentList, animation) => {\n  if (animation) {\n    contentList.forEach(content => {\n      content.classList.add(ClassName.FADE)\n      content.classList.add(ClassName.NONE)\n    })\n  }\n}\n\nexport {\n  showContent,\n  showStep,\n  Selectors,\n  ClassName,\n  customProperty,\n  detectAnimation\n}\n","import { closest } from './polyfill'\r\nimport { Selectors, customProperty, showStep, showContent } from './util'\r\n\r\nfunction clickStepLinearListener (event) {\r\n  event.preventDefault()\r\n}\r\n\r\nfunction clickStepNonLinearListener (event) {\r\n  event.preventDefault()\r\n\r\n  const step = closest(event.target, Selectors.STEPS)\r\n  if (step) {\r\n    const stepperNode = closest(step, Selectors.STEPPER)\r\n    const stepper = stepperNode[customProperty]\r\n\r\n    const stepIndex = stepper._steps.indexOf(step)\r\n    stepper._currentIndex = stepIndex\r\n    showStep(step, stepper._steps)\r\n    showContent(stepper._stepsContents[stepIndex], stepper._stepsContents)\r\n  }\r\n}\r\n\r\nexport {\r\n  clickStepLinearListener,\r\n  clickStepNonLinearListener\r\n}\r\n","import { showContent, showStep, Selectors, ClassName, customProperty, detectAnimation } from './util'\nimport { clickStepLinearListener, clickStepNonLinearListener } from './listeners'\n\nconst DEFAULT_OPTIONS = {\n  linear: true,\n  animation: false\n}\n\nclass Stepper {\n  constructor (element, _options = {}) {\n    this._element = element\n    this._currentIndex = 0\n    this._stepsContents = []\n    this._steps = [].slice.call(this._element.querySelectorAll(Selectors.STEPS))\n      .filter(step => step.hasAttribute('data-target'))\n\n    this._steps.forEach(step => {\n      this._stepsContents.push(\n        this._element.querySelector(step.getAttribute('data-target'))\n      )\n    })\n\n    this.options = {\n      ...DEFAULT_OPTIONS,\n      ..._options\n    }\n\n    if (this.options.linear) {\n      this._element.classList.add(ClassName.LINEAR)\n    }\n\n    detectAnimation(this._stepsContents, this.options.animation)\n    if (this._steps.length) {\n      showStep(this._steps[this._currentIndex], this._steps)\n      showContent(this._stepsContents[this._currentIndex], this._stepsContents)\n    }\n\n    this._setLinkListeners()\n    Object.defineProperty(this._element, customProperty, {\n      value: this,\n      writable: true\n    })\n  }\n\n  // Private\n\n  _setLinkListeners () {\n    this._steps.forEach(step => {\n      const link = step.querySelector(Selectors.LINK)\n      if (this.options.linear) {\n        link.addEventListener('click', clickStepLinearListener)\n      } else {\n        link.addEventListener('click', clickStepNonLinearListener)\n      }\n    })\n  }\n\n  // Public\n\n  next () {\n    this._currentIndex = (this._currentIndex + 1) <= this._steps.length - 1 ? this._currentIndex + 1 : (this._steps.length - 1)\n\n    showStep(this._steps[this._currentIndex], this._steps)\n    showContent(this._stepsContents[this._currentIndex], this._stepsContents)\n  }\n\n  previous () {\n    this._currentIndex = (this._currentIndex - 1) >= 0 ? this._currentIndex - 1 : 0\n\n    showStep(this._steps[this._currentIndex], this._steps)\n    showContent(this._stepsContents[this._currentIndex], this._stepsContents)\n  }\n\n  reset () {\n    this._currentIndex = 0\n    showStep(this._steps[this._currentIndex], this._steps)\n    showContent(this._stepsContents[this._currentIndex], this._stepsContents)\n  }\n\n  destroy () {\n    this._steps.forEach(step => {\n      const link = step.querySelector(Selectors.LINK)\n      if (this.options.linear) {\n        link.removeEventListener('click', clickStepLinearListener)\n      } else {\n        link.removeEventListener('click', clickStepNonLinearListener)\n      }\n    })\n\n    delete this._element[customProperty]\n    this._element = undefined\n    this._currentIndex = undefined\n    this._steps = undefined\n    this._stepsContents = undefined\n  }\n}\n\nexport default Stepper\n"],"names":["matches","window","Element","prototype","closest","element","selector","WinEvent","inType","params","Event","msMatchesSelector","webkitMatchesSelector","document","documentElement","contains","call","parentElement","parentNode","nodeType","e","createEvent","initEvent","Boolean","bubbles","cancelable","Selectors","ClassName","transitionEndEvent","customProperty","showStep","step","stepList","classList","activeStep","filter","length","remove","add","showContent","content","contentList","activeContent","duration","getTransitionDurationFromElement","addEventListener","complete","removeEventListener","emulateTransitionEnd","transitionDuration","getComputedStyle","parseFloat","split","called","emulatedDuration","listener","setTimeout","dispatchEvent","clickStepLinearListener","event","preventDefault","clickStepNonLinearListener","target","stepper","stepIndex","_steps","indexOf","_currentIndex","_stepsContents","DEFAULT_OPTIONS","linear","animation","_options","_element","slice","this","querySelectorAll","hasAttribute","forEach","_this","push","querySelector","getAttribute","options","_setLinkListeners","Object","defineProperty","value","writable","link","_this2","next","previous","reset","destroy","_this3","undefined"],"mappings":"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"}