{"version":3,"file":"bs-stepper.min.js","sources":["../../src/js/util.js","../../src/js/polyfill.js","../../src/js/listeners.js","../../src/js/index.js"],"sourcesContent":["const Selectors = {\r\n  STEPS: '.step',\r\n  LINK: 'a',\r\n  STEPPER: '.bs-stepper'\r\n}\r\n\r\nconst ClassName = {\r\n  ACTIVE: 'active',\r\n  LINEAR: 'linear'\r\n}\r\n\r\nconst customProperty = 'bsStepper'\r\n\r\nconst showStep = (step, stepList) => {\r\n  if (step.classList.contains(ClassName.ACTIVE)) {\r\n    return\r\n  }\r\n\r\n  const activeStep = stepList.filter(step => step.classList.contains(ClassName.ACTIVE))\r\n  if (activeStep.length) {\r\n    activeStep[0].classList.remove(ClassName.ACTIVE)\r\n  }\r\n\r\n  step.classList.add(ClassName.ACTIVE)\r\n}\r\n\r\nconst showContent = (content, contentList) => {\r\n  if (content.classList.contains(ClassName.ACTIVE)) {\r\n    return\r\n  }\r\n\r\n  const activeContent = contentList.filter(content => content.classList.contains(ClassName.ACTIVE))\r\n  if (activeContent.length) {\r\n    activeContent[0].classList.remove(ClassName.ACTIVE)\r\n  }\r\n\r\n  content.classList.add(ClassName.ACTIVE)\r\n}\r\n\r\nexport {\r\n  showContent,\r\n  showStep,\r\n  Selectors,\r\n  ClassName,\r\n  customProperty\r\n}\r\n","let matches = window.Element.prototype.matches\r\nlet closest = (element, selector) => element.closest(selector)\r\n\r\nif (!window.Element.prototype.matches) {\r\n  matches = window.Element.prototype.msMatchesSelector ||\r\n    window.Element.prototype.webkitMatchesSelector\r\n}\r\n\r\nif (!window.Element.prototype.closest) {\r\n  closest = (element, selector) => {\r\n    if (!document.documentElement.contains(element)) {\r\n      return null\r\n    }\r\n\r\n    do {\r\n      if (matches.call(element, selector)) {\r\n        return element\r\n      }\r\n\r\n      element = element.parentElement || element.parentNode\r\n    } while (element !== null && element.nodeType === 1)\r\n\r\n    return null\r\n  }\r\n}\r\n\r\nexport {\r\n  closest\r\n}\r\n","import { closest } from './polyfill'\r\nimport { Selectors, customProperty, showStep, showContent } from './util'\r\n\r\nfunction clickStepLinearListener (event) {\r\n  event.preventDefault()\r\n}\r\n\r\nfunction clickStepNonLinearListener (event) {\r\n  event.preventDefault()\r\n\r\n  const step = closest(event.target, Selectors.STEPS)\r\n  if (step) {\r\n    const stepperNode = closest(step, Selectors.STEPPER)\r\n    const stepper = stepperNode[customProperty]\r\n\r\n    const stepIndex = stepper._steps.indexOf(step)\r\n    stepper._currentIndex = stepIndex\r\n    showStep(step, stepper._steps)\r\n    showContent(stepper._stepsContents[stepIndex], stepper._stepsContents)\r\n  }\r\n}\r\n\r\nexport {\r\n  clickStepLinearListener,\r\n  clickStepNonLinearListener\r\n}\r\n","import { showContent, showStep, Selectors, ClassName, customProperty } from './util'\r\nimport { clickStepLinearListener, clickStepNonLinearListener } from './listeners'\r\n\r\nconst DEFAULT_OPTIONS = {\r\n  linear: true\r\n}\r\n\r\nclass Stepper {\r\n  constructor (element, _options) {\r\n    this._element = element\r\n    this._currentIndex = 0\r\n    this._stepsContents = []\r\n    this._steps = [].slice.call(this._element.querySelectorAll(Selectors.STEPS))\r\n      .filter(step => step.hasAttribute('data-target'))\r\n\r\n    this._steps.forEach(step => {\r\n      this._stepsContents.push(\r\n        this._element.querySelector(step.getAttribute('data-target'))\r\n      )\r\n    })\r\n\r\n    this.options = {\r\n      ...DEFAULT_OPTIONS,\r\n      ..._options\r\n    }\r\n\r\n    if (this.options.linear) {\r\n      this._element.classList.add(ClassName.LINEAR)\r\n    }\r\n\r\n    if (this._steps.length) {\r\n      showStep(this._steps[this._currentIndex], this._steps)\r\n      showContent(this._stepsContents[this._currentIndex], this._stepsContents)\r\n    }\r\n\r\n    this._setLinkListeners()\r\n\r\n    Object.defineProperty(this._element, customProperty, {\r\n      value: this,\r\n      writable: true\r\n    })\r\n  }\r\n\r\n  // Private\r\n\r\n  _setLinkListeners () {\r\n    this._steps.forEach(step => {\r\n      const link = step.querySelector(Selectors.LINK)\r\n      if (this.options.linear) {\r\n        link.addEventListener('click', clickStepLinearListener)\r\n      } else {\r\n        link.addEventListener('click', clickStepNonLinearListener)\r\n      }\r\n    })\r\n  }\r\n\r\n  // Public\r\n\r\n  next () {\r\n    this._currentIndex = (this._currentIndex + 1) <= this._steps.length - 1 ? this._currentIndex + 1 : (this._steps.length - 1)\r\n\r\n    showStep(this._steps[this._currentIndex], this._steps)\r\n    showContent(this._stepsContents[this._currentIndex], this._stepsContents)\r\n  }\r\n\r\n  previous () {\r\n    this._currentIndex = (this._currentIndex - 1) >= 0 ? this._currentIndex - 1 : 0\r\n\r\n    showStep(this._steps[this._currentIndex], this._steps)\r\n    showContent(this._stepsContents[this._currentIndex], this._stepsContents)\r\n  }\r\n\r\n  destroy () {\r\n    if (!this.options.linear) {\r\n      this._steps.forEach(step => {\r\n        const link = step.querySelector(Selectors.LINK)\r\n        if (this.options.linear) {\r\n          link.removeEventListener('click', clickStepLinearListener)\r\n        } else {\r\n          link.removeEventListener('click', clickStepNonLinearListener)\r\n        }\r\n      })\r\n    }\r\n\r\n    delete this._element[customProperty]\r\n    this._element = undefined\r\n    this._currentIndex = undefined\r\n    this._steps = undefined\r\n    this._stepsContents = undefined\r\n  }\r\n}\r\n\r\nexport default Stepper\r\n"],"names":["Selectors","ClassName","customProperty","showStep","step","stepList","classList","contains","activeStep","filter","length","remove","add","showContent","content","contentList","activeContent","matches","window","Element","prototype","closest","element","selector","clickStepLinearListener","event","preventDefault","clickStepNonLinearListener","target","stepper","stepIndex","_steps","indexOf","_currentIndex","_stepsContents","msMatchesSelector","webkitMatchesSelector","document","documentElement","call","parentElement","parentNode","nodeType","DEFAULT_OPTIONS","linear","_options","_element","slice","this","querySelectorAll","hasAttribute","forEach","_this","push","querySelector","getAttribute","options","_setLinkListeners","Object","defineProperty","value","writable","link","_this2","addEventListener","next","previous","destroy","_this3","removeEventListener","undefined"],"mappings":"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"}