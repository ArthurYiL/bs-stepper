{"version":3,"file":"bs-stepper.min.js","sources":["../../src/js/polyfill.js","../../src/js/index.js"],"sourcesContent":["let matches = window.Element.prototype.matches\r\nlet closest = (element, selector) => element.closest(selector)\r\n\r\nif (!window.Element.prototype.matches) {\r\n  matches = window.Element.prototype.msMatchesSelector ||\r\n    window.Element.prototype.webkitMatchesSelector\r\n}\r\n\r\nif (!window.Element.prototype.closest) {\r\n  closest = (element, selector) => {\r\n    if (!document.documentElement.contains(element)) {\r\n      return null\r\n    }\r\n\r\n    do {\r\n      if (matches.call(element, selector)) {\r\n        return element\r\n      }\r\n\r\n      element = element.parentElement || element.parentNode\r\n    } while (element !== null && element.nodeType === 1)\r\n\r\n    return null\r\n  }\r\n}\r\n\r\nexport {\r\n  closest\r\n}\r\n","import { closest } from './polyfill'\r\n\r\nconst Selectors = {\r\n  STEPS: '.step',\r\n  LINK: 'a',\r\n  STEPPER: '.bs-stepper'\r\n}\r\n\r\nconst ClassName = {\r\n  ACTIVE: 'active',\r\n  LINEAR: 'linear'\r\n}\r\n\r\nconst DEFAULT_OPTIONS = {\r\n  linear: true\r\n}\r\n\r\nconst customProperty = 'bsStepper'\r\n\r\nconst showStep = (step, stepList) => {\r\n  if (step.classList.contains(ClassName.ACTIVE)) {\r\n    return\r\n  }\r\n\r\n  const activeStep = stepList.filter(step => step.classList.contains(ClassName.ACTIVE))\r\n  if (activeStep.length) {\r\n    activeStep[0].classList.remove(ClassName.ACTIVE)\r\n  }\r\n\r\n  step.classList.add(ClassName.ACTIVE)\r\n}\r\n\r\nconst showContent = (content, contentList) => {\r\n  if (content.classList.contains(ClassName.ACTIVE)) {\r\n    return\r\n  }\r\n\r\n  const activeContent = contentList.filter(content => content.classList.contains(ClassName.ACTIVE))\r\n  if (activeContent.length) {\r\n    activeContent[0].classList.remove(ClassName.ACTIVE)\r\n  }\r\n\r\n  content.classList.add(ClassName.ACTIVE)\r\n}\r\n\r\nfunction clickStepListener (event) {\r\n  event.preventDefault()\r\n\r\n  const step = closest(event.target, Selectors.STEPS)\r\n  if (step) {\r\n    const stepperNode = closest(step, Selectors.STEPPER)\r\n    const stepper = stepperNode[customProperty]\r\n\r\n    const stepIndex = stepper._steps.indexOf(step)\r\n    showStep(step, stepper._steps)\r\n    showContent(stepper._stepsContents[stepIndex], stepper._stepsContents)\r\n  }\r\n}\r\n\r\nclass bsStepper {\r\n  constructor (element, _options) {\r\n    this._element = element\r\n    this._currentIndex = 0\r\n    this._stepsContents = []\r\n    this._steps = [].slice.call(this._element.querySelectorAll(Selectors.STEPS))\r\n      .filter(step => step.hasAttribute('data-target'))\r\n\r\n    this._steps.forEach(step => {\r\n      this._stepsContents.push(\r\n        this._element.querySelector(step.getAttribute('data-target'))\r\n      )\r\n    })\r\n\r\n    this.options = {\r\n      ...DEFAULT_OPTIONS,\r\n      ..._options\r\n    }\r\n\r\n    if (this._steps.length) {\r\n      showStep(this._steps[this._currentIndex], this._steps)\r\n      showContent(this._stepsContents[this._currentIndex], this._stepsContents)\r\n    }\r\n\r\n    this._setLinkListeners()\r\n\r\n    Object.defineProperty(this._element, customProperty, {\r\n      value: this,\r\n      writable: true\r\n    })\r\n  }\r\n\r\n  // Private\r\n\r\n  _setLinkListeners () {\r\n    if (!this.options.linear) {\r\n      this._steps.forEach(step => {\r\n        step.querySelector(Selectors.LINK)\r\n          .addEventListener('click', clickStepListener)\r\n      })\r\n    } else {\r\n      this._element.classList.add(ClassName.LINEAR)\r\n    }\r\n  }\r\n\r\n  // Public\r\n\r\n  next () {\r\n    this._currentIndex = (this._currentIndex + 1) <= this._steps.length - 1 ? this._currentIndex + 1 : 0\r\n\r\n    showStep(this._steps[this._currentIndex], this._steps)\r\n    showContent(this._stepsContents[this._currentIndex], this._stepsContents)\r\n  }\r\n\r\n  destroy () {\r\n    if (!this.options.linear) {\r\n      this._steps.forEach(step => {\r\n        const link = step.querySelector(Selectors.LINK)\r\n        link.removeEventListener('click', clickStepListener)\r\n      })\r\n    }\r\n\r\n    delete this._element[customProperty]\r\n    this._element = undefined\r\n    this._currentIndex = undefined\r\n    this._steps = undefined\r\n    this._stepsContents = undefined\r\n  }\r\n}\r\n\r\nexport default bsStepper\r\n"],"names":["matches","window","Element","prototype","closest","element","selector","msMatchesSelector","webkitMatchesSelector","document","documentElement","contains","call","parentElement","parentNode","nodeType","Selectors","ClassName","DEFAULT_OPTIONS","linear","customProperty","showStep","step","stepList","classList","activeStep","filter","length","remove","add","showContent","content","contentList","activeContent","clickStepListener","event","preventDefault","target","stepper","stepIndex","_steps","indexOf","_stepsContents","_options","_element","_currentIndex","slice","this","querySelectorAll","hasAttribute","forEach","_this","push","querySelector","getAttribute","options","_setLinkListeners","Object","defineProperty","value","writable","addEventListener","next","destroy","removeEventListener","undefined"],"mappings":";;;;;oYAAA,IAAIA,EAAUC,OAAOC,QAAQC,UAAUH,QACnCI,EAAU,SAACC,EAASC,UAAaD,EAAQD,QAAQE,IAEhDL,OAAOC,QAAQC,UAAUH,UAC5BA,EAAUC,OAAOC,QAAQC,UAAUI,mBACjCN,OAAOC,QAAQC,UAAUK,uBAGxBP,OAAOC,QAAQC,UAAUC,UAC5BA,EAAU,SAACC,EAASC,OACbG,SAASC,gBAAgBC,SAASN,UAC9B,OAGN,IACGL,EAAQY,KAAKP,EAASC,UACjBD,EAGTA,EAAUA,EAAQQ,eAAiBR,EAAQS,iBACxB,OAAZT,GAAyC,IAArBA,EAAQU,iBAE9B,OCpBX,IAAMC,EACG,QADHA,EAEE,IAFFA,EAGK,cAGLC,EACI,SADJA,EAEI,SAGJC,EAAkB,CACtBC,QAAQ,GAGJC,EAAiB,YAEjBC,EAAW,SAACC,EAAMC,OAClBD,EAAKE,UAAUb,SAASM,QAItBQ,EAAaF,EAASG,OAAO,SAAAJ,UAAQA,EAAKE,UAAUb,SAASM,KAC/DQ,EAAWE,QACbF,EAAW,GAAGD,UAAUI,OAAOX,GAGjCK,EAAKE,UAAUK,IAAIZ,KAGfa,EAAc,SAACC,EAASC,OACxBD,EAAQP,UAAUb,SAASM,QAIzBgB,EAAgBD,EAAYN,OAAO,SAAAK,UAAWA,EAAQP,UAAUb,SAASM,KAC3EgB,EAAcN,QAChBM,EAAc,GAAGT,UAAUI,OAAOX,GAGpCc,EAAQP,UAAUK,IAAIZ,KAGxB,SAASiB,EAAmBC,GAC1BA,EAAMC,qBAEAd,EAAOlB,EAAQ+B,EAAME,OAAQrB,MAC/BM,EAAM,KAEFgB,EADclC,EAAQkB,EAAMN,GACNI,GAEtBmB,EAAYD,EAAQE,OAAOC,QAAQnB,GACzCD,EAASC,EAAMgB,EAAQE,QACvBV,EAAYQ,EAAQI,eAAeH,GAAYD,EAAQI,8CAK5CrC,EAASsC,mBACfC,SAAWvC,OACXwC,cAAgB,OAChBH,eAAiB,QACjBF,OAAS,GAAGM,MAAMlC,KAAKmC,KAAKH,SAASI,iBAAiBhC,IACxDU,OAAO,SAAAJ,UAAQA,EAAK2B,aAAa,sBAE/BT,OAAOU,QAAQ,SAAA5B,GAClB6B,EAAKT,eAAeU,KAClBD,EAAKP,SAASS,cAAc/B,EAAKgC,aAAa,wBAI7CC,aACArC,EACAyB,GAGDI,KAAKP,OAAOb,SACdN,EAAS0B,KAAKP,OAAOO,KAAKF,eAAgBE,KAAKP,QAC/CV,EAAYiB,KAAKL,eAAeK,KAAKF,eAAgBE,KAAKL,sBAGvDc,oBAELC,OAAOC,eAAeX,KAAKH,SAAUxB,EAAgB,CACnDuC,MAAOZ,KACPa,UAAU,+BAMdJ,6BACOT,KAAKQ,QAAQpC,YAMXyB,SAASpB,UAAUK,IAAIZ,QALvBuB,OAAOU,QAAQ,SAAA5B,GAClBA,EAAK+B,cAAcrC,GAChB6C,iBAAiB,QAAS3B,QASnC4B,qBACOjB,cAAiBE,KAAKF,cAAgB,GAAME,KAAKP,OAAOb,OAAS,EAAIoB,KAAKF,cAAgB,EAAI,EAEnGxB,EAAS0B,KAAKP,OAAOO,KAAKF,eAAgBE,KAAKP,QAC/CV,EAAYiB,KAAKL,eAAeK,KAAKF,eAAgBE,KAAKL,mBAG5DqB,mBACOhB,KAAKQ,QAAQpC,aACXqB,OAAOU,QAAQ,SAAA5B,GACLA,EAAK+B,cAAcrC,GAC3BgD,oBAAoB,QAAS9B,YAI/Ba,KAAKH,SAASxB,QAChBwB,cAAWqB,OACXpB,mBAAgBoB,OAChBzB,YAASyB,OACTvB,oBAAiBuB"}