{"version":3,"file":"bs-stepper.min.js","sources":["../../src/js/util.js","../../src/js/polyfill.js","../../src/js/listeners.js","../../src/js/index.js"],"sourcesContent":["const Selectors = {\n  STEPS: '.step',\n  LINK: 'a',\n  STEPPER: '.bs-stepper'\n}\n\nconst ClassName = {\n  ACTIVE: 'active',\n  LINEAR: 'linear'\n}\n\nconst customProperty = 'bsStepper'\n\nconst showStep = (step, stepList) => {\n  if (step.classList.contains(ClassName.ACTIVE)) {\n    return\n  }\n\n  const activeStep = stepList.filter(step => step.classList.contains(ClassName.ACTIVE))\n  if (activeStep.length) {\n    activeStep[0].classList.remove(ClassName.ACTIVE)\n  }\n\n  step.classList.add(ClassName.ACTIVE)\n}\n\nconst showContent = (content, contentList) => {\n  if (content.classList.contains(ClassName.ACTIVE)) {\n    return\n  }\n\n  const activeContent = contentList.filter(content => content.classList.contains(ClassName.ACTIVE))\n  if (activeContent.length) {\n    activeContent[0].classList.remove(ClassName.ACTIVE)\n  }\n\n  content.classList.add(ClassName.ACTIVE)\n}\n\nexport {\n  showContent,\n  showStep,\n  Selectors,\n  ClassName,\n  customProperty\n}\n","let matches = window.Element.prototype.matches\nlet closest = (element, selector) => element.closest(selector)\n\nif (!window.Element.prototype.matches) {\n  matches = window.Element.prototype.msMatchesSelector ||\n    window.Element.prototype.webkitMatchesSelector\n}\n\nif (!window.Element.prototype.closest) {\n  closest = (element, selector) => {\n    if (!document.documentElement.contains(element)) {\n      return null\n    }\n\n    do {\n      if (matches.call(element, selector)) {\n        return element\n      }\n\n      element = element.parentElement || element.parentNode\n    } while (element !== null && element.nodeType === 1)\n\n    return null\n  }\n}\n\nexport {\n  closest\n}\n","import { closest } from './polyfill'\nimport { Selectors, customProperty, showStep, showContent } from './util'\n\nfunction clickStepLinearListener (event) {\n  event.preventDefault()\n}\n\nfunction clickStepNonLinearListener (event) {\n  event.preventDefault()\n\n  const step = closest(event.target, Selectors.STEPS)\n  if (step) {\n    const stepperNode = closest(step, Selectors.STEPPER)\n    const stepper = stepperNode[customProperty]\n\n    const stepIndex = stepper._steps.indexOf(step)\n    showStep(step, stepper._steps)\n    showContent(stepper._stepsContents[stepIndex], stepper._stepsContents)\n  }\n}\n\nexport {\n  clickStepLinearListener,\n  clickStepNonLinearListener\n}\n","import { showContent, showStep, Selectors, ClassName, customProperty } from './util'\nimport { clickStepLinearListener, clickStepNonLinearListener } from './listeners'\n\nconst DEFAULT_OPTIONS = {\n  linear: true\n}\n\nclass bsStepper {\n  constructor (element, _options) {\n    this._element = element\n    this._currentIndex = 0\n    this._stepsContents = []\n    this._steps = [].slice.call(this._element.querySelectorAll(Selectors.STEPS))\n      .filter(step => step.hasAttribute('data-target'))\n\n    this._steps.forEach(step => {\n      this._stepsContents.push(\n        this._element.querySelector(step.getAttribute('data-target'))\n      )\n    })\n\n    this.options = {\n      ...DEFAULT_OPTIONS,\n      ..._options\n    }\n\n    if (this.options.linear) {\n      this._element.classList.add(ClassName.LINEAR)\n    }\n\n    if (this._steps.length) {\n      showStep(this._steps[this._currentIndex], this._steps)\n      showContent(this._stepsContents[this._currentIndex], this._stepsContents)\n    }\n\n    this._setLinkListeners()\n\n    Object.defineProperty(this._element, customProperty, {\n      value: this,\n      writable: true\n    })\n  }\n\n  // Private\n\n  _setLinkListeners () {\n    this._steps.forEach(step => {\n      const link = step.querySelector(Selectors.LINK)\n      if (this.options.linear) {\n        link.addEventListener('click', clickStepLinearListener)\n      } else {\n        link.addEventListener('click', clickStepNonLinearListener)\n      }\n    })\n  }\n\n  // Public\n\n  next () {\n    this._currentIndex = (this._currentIndex + 1) <= this._steps.length - 1 ? this._currentIndex + 1 : 0\n\n    showStep(this._steps[this._currentIndex], this._steps)\n    showContent(this._stepsContents[this._currentIndex], this._stepsContents)\n  }\n\n  destroy () {\n    if (!this.options.linear) {\n      this._steps.forEach(step => {\n        const link = step.querySelector(Selectors.LINK)\n        if (this.options.linear) {\n          link.removeEventListener('click', clickStepLinearListener)\n        } else {\n          link.removeEventListener('click', clickStepNonLinearListener)\n        }\n      })\n    }\n\n    delete this._element[customProperty]\n    this._element = undefined\n    this._currentIndex = undefined\n    this._steps = undefined\n    this._stepsContents = undefined\n  }\n}\n\nexport default bsStepper\n"],"names":["Selectors","ClassName","customProperty","showStep","step","stepList","classList","contains","activeStep","filter","length","remove","add","showContent","content","contentList","activeContent","matches","window","Element","prototype","closest","element","selector","clickStepLinearListener","event","preventDefault","clickStepNonLinearListener","target","stepper","stepIndex","_steps","indexOf","_stepsContents","msMatchesSelector","webkitMatchesSelector","document","documentElement","call","parentElement","parentNode","nodeType","DEFAULT_OPTIONS","linear","_options","_element","_currentIndex","slice","this","querySelectorAll","hasAttribute","forEach","_this","push","querySelector","getAttribute","options","_setLinkListeners","Object","defineProperty","value","writable","link","_this2","addEventListener","next","destroy","_this3","removeEventListener","undefined"],"mappings":"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"}