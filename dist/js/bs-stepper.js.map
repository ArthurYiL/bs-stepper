{"version":3,"file":"bs-stepper.js","sources":["../../src/js/polyfill.js","../../src/js/index.js"],"sourcesContent":["let matches = window.Element.prototype.matches\r\nlet closest = (element, selector) => element.closest(selector)\r\n\r\nif (!window.Element.prototype.matches) {\r\n  matches = window.Element.prototype.msMatchesSelector ||\r\n    window.Element.prototype.webkitMatchesSelector\r\n}\r\n\r\nif (!window.Element.prototype.closest) {\r\n  closest = (element, selector) => {\r\n    if (!document.documentElement.contains(element)) {\r\n      return null\r\n    }\r\n\r\n    do {\r\n      if (matches.call(element, selector)) {\r\n        return element\r\n      }\r\n\r\n      element = element.parentElement || element.parentNode\r\n    } while (element !== null && element.nodeType === 1)\r\n\r\n    return null\r\n  }\r\n}\r\n\r\nexport {\r\n  closest\r\n}\r\n","import { closest } from './polyfill'\r\n\r\nconst Selectors = {\r\n  STEPS: '.step',\r\n  LINK: 'a',\r\n  STEPPER: '.bs-stepper'\r\n}\r\n\r\nconst ClassName = {\r\n  ACTIVE: 'active',\r\n  LINEAR: 'linear'\r\n}\r\n\r\nconst DEFAULT_OPTIONS = {\r\n  linear: true\r\n}\r\n\r\nconst customProperty = 'bsStepper'\r\n\r\nconst showStep = (step, stepList) => {\r\n  if (step.classList.contains(ClassName.ACTIVE)) {\r\n    return\r\n  }\r\n\r\n  const activeStep = stepList.filter(step => step.classList.contains(ClassName.ACTIVE))\r\n  if (activeStep.length) {\r\n    activeStep[0].classList.remove(ClassName.ACTIVE)\r\n  }\r\n\r\n  step.classList.add(ClassName.ACTIVE)\r\n}\r\n\r\nconst showContent = (content, contentList) => {\r\n  if (content.classList.contains(ClassName.ACTIVE)) {\r\n    return\r\n  }\r\n\r\n  const activeContent = contentList.filter(content => content.classList.contains(ClassName.ACTIVE))\r\n  if (activeContent.length) {\r\n    activeContent[0].classList.remove(ClassName.ACTIVE)\r\n  }\r\n\r\n  content.classList.add(ClassName.ACTIVE)\r\n}\r\n\r\nfunction clickStepListener (event) {\r\n  event.preventDefault()\r\n\r\n  const step = closest(event.target, Selectors.STEPS)\r\n  if (step) {\r\n    const stepperNode = closest(step, Selectors.STEPPER)\r\n    const stepper = stepperNode[customProperty]\r\n\r\n    const stepIndex = stepper._steps.indexOf(step)\r\n    showStep(step, stepper._steps)\r\n    showContent(stepper._stepsContents[stepIndex], stepper._stepsContents)\r\n  }\r\n}\r\n\r\nclass bsStepper {\r\n  constructor (element, _options) {\r\n    this._element = element\r\n    this._currentIndex = 0\r\n    this._stepsContents = []\r\n    this._steps = [].slice.call(this._element.querySelectorAll(Selectors.STEPS))\r\n      .filter(step => step.hasAttribute('data-target'))\r\n\r\n    this._steps.forEach(step => {\r\n      this._stepsContents.push(\r\n        this._element.querySelector(step.getAttribute('data-target'))\r\n      )\r\n    })\r\n\r\n    this.options = {\r\n      ...DEFAULT_OPTIONS,\r\n      ..._options\r\n    }\r\n\r\n    if (this._steps.length) {\r\n      showStep(this._steps[this._currentIndex], this._steps)\r\n      showContent(this._stepsContents[this._currentIndex], this._stepsContents)\r\n    }\r\n\r\n    this._setLinkListeners()\r\n\r\n    Object.defineProperty(this._element, customProperty, {\r\n      value: this,\r\n      writable: true\r\n    })\r\n  }\r\n\r\n  // Private\r\n\r\n  _setLinkListeners () {\r\n    if (!this.options.linear) {\r\n      this._steps.forEach(step => {\r\n        step.querySelector(Selectors.LINK)\r\n          .addEventListener('click', clickStepListener)\r\n      })\r\n    } else {\r\n      this._element.classList.add(ClassName.LINEAR)\r\n    }\r\n  }\r\n\r\n  // Public\r\n\r\n  next () {\r\n    this._currentIndex = (this._currentIndex + 1) <= this._steps.length - 1 ? this._currentIndex + 1 : 0\r\n\r\n    showStep(this._steps[this._currentIndex], this._steps)\r\n    showContent(this._stepsContents[this._currentIndex], this._stepsContents)\r\n  }\r\n\r\n  destroy () {\r\n    if (!this.options.linear) {\r\n      this._steps.forEach(step => {\r\n        const link = step.querySelector(Selectors.LINK)\r\n        link.removeEventListener('click', clickStepListener)\r\n      })\r\n    }\r\n\r\n    delete this._element[customProperty]\r\n    this._element = undefined\r\n    this._currentIndex = undefined\r\n    this._steps = undefined\r\n    this._stepsContents = undefined\r\n  }\r\n}\r\n\r\nexport default bsStepper\r\n"],"names":["matches","window","Element","prototype","closest","element","selector","msMatchesSelector","webkitMatchesSelector","document","documentElement","contains","call","parentElement","parentNode","nodeType","Selectors","STEPS","LINK","STEPPER","ClassName","ACTIVE","LINEAR","DEFAULT_OPTIONS","linear","customProperty","showStep","step","stepList","classList","activeStep","filter","length","remove","add","showContent","content","contentList","activeContent","clickStepListener","event","preventDefault","target","stepperNode","stepper","stepIndex","_steps","indexOf","_stepsContents","bsStepper","_options","_element","_currentIndex","slice","querySelectorAll","hasAttribute","forEach","push","querySelector","getAttribute","options","_setLinkListeners","Object","defineProperty","value","writable","addEventListener","next","destroy","link","removeEventListener","undefined"],"mappings":"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"}