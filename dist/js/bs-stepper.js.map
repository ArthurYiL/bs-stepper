{"version":3,"file":"bs-stepper.js","sources":["../../src/js/util.js","../../src/js/polyfill.js","../../src/js/listeners.js","../../src/js/index.js"],"sourcesContent":["const Selectors = {\n  STEPS: '.step',\n  LINK: 'a',\n  STEPPER: '.bs-stepper'\n}\n\nconst ClassName = {\n  ACTIVE: 'active',\n  LINEAR: 'linear'\n}\n\nconst customProperty = 'bsStepper'\n\nconst showStep = (step, stepList) => {\n  if (step.classList.contains(ClassName.ACTIVE)) {\n    return\n  }\n\n  const activeStep = stepList.filter(step => step.classList.contains(ClassName.ACTIVE))\n  if (activeStep.length) {\n    activeStep[0].classList.remove(ClassName.ACTIVE)\n  }\n\n  step.classList.add(ClassName.ACTIVE)\n}\n\nconst showContent = (content, contentList) => {\n  if (content.classList.contains(ClassName.ACTIVE)) {\n    return\n  }\n\n  const activeContent = contentList.filter(content => content.classList.contains(ClassName.ACTIVE))\n  if (activeContent.length) {\n    activeContent[0].classList.remove(ClassName.ACTIVE)\n  }\n\n  content.classList.add(ClassName.ACTIVE)\n}\n\nexport {\n  showContent,\n  showStep,\n  Selectors,\n  ClassName,\n  customProperty\n}\n","let matches = window.Element.prototype.matches\nlet closest = (element, selector) => element.closest(selector)\n\nif (!window.Element.prototype.matches) {\n  matches = window.Element.prototype.msMatchesSelector ||\n    window.Element.prototype.webkitMatchesSelector\n}\n\nif (!window.Element.prototype.closest) {\n  closest = (element, selector) => {\n    if (!document.documentElement.contains(element)) {\n      return null\n    }\n\n    do {\n      if (matches.call(element, selector)) {\n        return element\n      }\n\n      element = element.parentElement || element.parentNode\n    } while (element !== null && element.nodeType === 1)\n\n    return null\n  }\n}\n\nexport {\n  closest\n}\n","import { closest } from './polyfill'\nimport { Selectors, customProperty, showStep, showContent } from './util'\n\nfunction clickStepLinearListener (event) {\n  event.preventDefault()\n}\n\nfunction clickStepNonLinearListener (event) {\n  event.preventDefault()\n\n  const step = closest(event.target, Selectors.STEPS)\n  if (step) {\n    const stepperNode = closest(step, Selectors.STEPPER)\n    const stepper = stepperNode[customProperty]\n\n    const stepIndex = stepper._steps.indexOf(step)\n    showStep(step, stepper._steps)\n    showContent(stepper._stepsContents[stepIndex], stepper._stepsContents)\n  }\n}\n\nexport {\n  clickStepLinearListener,\n  clickStepNonLinearListener\n}\n","import { showContent, showStep, Selectors, ClassName, customProperty } from './util'\nimport { clickStepLinearListener, clickStepNonLinearListener } from './listeners'\n\nconst DEFAULT_OPTIONS = {\n  linear: true\n}\n\nclass bsStepper {\n  constructor (element, _options) {\n    this._element = element\n    this._currentIndex = 0\n    this._stepsContents = []\n    this._steps = [].slice.call(this._element.querySelectorAll(Selectors.STEPS))\n      .filter(step => step.hasAttribute('data-target'))\n\n    this._steps.forEach(step => {\n      this._stepsContents.push(\n        this._element.querySelector(step.getAttribute('data-target'))\n      )\n    })\n\n    this.options = {\n      ...DEFAULT_OPTIONS,\n      ..._options\n    }\n\n    if (this.options.linear) {\n      this._element.classList.add(ClassName.LINEAR)\n    }\n\n    if (this._steps.length) {\n      showStep(this._steps[this._currentIndex], this._steps)\n      showContent(this._stepsContents[this._currentIndex], this._stepsContents)\n    }\n\n    this._setLinkListeners()\n\n    Object.defineProperty(this._element, customProperty, {\n      value: this,\n      writable: true\n    })\n  }\n\n  // Private\n\n  _setLinkListeners () {\n    this._steps.forEach(step => {\n      const link = step.querySelector(Selectors.LINK)\n      if (this.options.linear) {\n        link.addEventListener('click', clickStepLinearListener)\n      } else {\n        link.addEventListener('click', clickStepNonLinearListener)\n      }\n    })\n  }\n\n  // Public\n\n  next () {\n    this._currentIndex = (this._currentIndex + 1) <= this._steps.length - 1 ? this._currentIndex + 1 : 0\n\n    showStep(this._steps[this._currentIndex], this._steps)\n    showContent(this._stepsContents[this._currentIndex], this._stepsContents)\n  }\n\n  destroy () {\n    if (!this.options.linear) {\n      this._steps.forEach(step => {\n        const link = step.querySelector(Selectors.LINK)\n        if (this.options.linear) {\n          link.removeEventListener('click', clickStepLinearListener)\n        } else {\n          link.removeEventListener('click', clickStepNonLinearListener)\n        }\n      })\n    }\n\n    delete this._element[customProperty]\n    this._element = undefined\n    this._currentIndex = undefined\n    this._steps = undefined\n    this._stepsContents = undefined\n  }\n}\n\nexport default bsStepper\n"],"names":["Selectors","STEPS","LINK","STEPPER","ClassName","ACTIVE","LINEAR","customProperty","showStep","step","stepList","classList","contains","activeStep","filter","length","remove","add","showContent","content","contentList","activeContent","matches","window","Element","prototype","closest","element","selector","msMatchesSelector","webkitMatchesSelector","document","documentElement","call","parentElement","parentNode","nodeType","clickStepLinearListener","event","preventDefault","clickStepNonLinearListener","target","stepperNode","stepper","stepIndex","_steps","indexOf","_stepsContents","DEFAULT_OPTIONS","linear","bsStepper","_options","_element","_currentIndex","slice","querySelectorAll","hasAttribute","forEach","push","querySelector","getAttribute","options","_setLinkListeners","Object","defineProperty","value","writable","link","addEventListener","next","destroy","removeEventListener","undefined"],"mappings":"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"}